!function(e){"use strict";var i={version:6.2};e.WeixinApi=i,"function"==typeof define&&(define.amd||define.cmd)&&(define.amd?define(function(){return i}):define.cmd&&define(function(e,n,a){a.exports=i}));var n=function(){for(var e,i,n={},a=0,r=arguments.length;r>a;a++)if(e=arguments[a],"object"==typeof e)for(i in e)e[i]&&(n[i]=e[i]);return n},a=function(e,a,r){r=r||{};var t=function(e){switch(!0){case/\:cancel$/i.test(e.err_msg):r.cancel&&r.cancel(e);break;case/\:(confirm|ok)$/i.test(e.err_msg):r.confirm&&r.confirm(e);break;case/\:fail$/i.test(e.err_msg):default:r.fail&&r.fail(e)}r.all&&r.all(e)},o=function(i,n){if("menu:share:timeline"==e.menu||"general:share"==e.menu&&"timeline"==n.shareTo){var a=i.title;i.title=i.desc||a,i.desc=a||i.desc}!n||"favorite"!=n.shareTo&&"favorite"!=n.scene?"general:share"===e.menu?"timeline"===n.shareTo?WeixinJSBridge.invoke("shareTimeline",i,t):"friend"===n.shareTo?WeixinJSBridge.invoke("sendAppMessage",i,t):"QQ"===n.shareTo?WeixinJSBridge.invoke("shareQQ",i,t):"weibo"===n.shareTo&&WeixinJSBridge.invoke("shareWeibo",i,t):WeixinJSBridge.invoke(e.action,i,t):r.favorite===!1?WeixinJSBridge.invoke("sendAppMessage",i,new Function):WeixinJSBridge.invoke(e.action,i,t)};WeixinJSBridge.on(e.menu,function(e){if(r.dataLoaded=r.dataLoaded||new Function,r.async&&r.ready)i._wx_loadedCb_=r.dataLoaded,i._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(i._wx_loadedCb_=new Function),r.dataLoaded=function(t){r.__cbkCalled=!0;var s=n(a,t);s.img_url=s.imgUrl||s.img_url,delete s.imgUrl,i._wx_loadedCb_(s),o(s,e)},(!e||"favorite"!=e.shareTo&&"favorite"!=e.scene||r.favorite!==!1)&&(r.ready&&r.ready(e,a),r.__cbkCalled||(r.dataLoaded({}),r.__cbkCalled=!1));else{var t=n(a);(!e||"favorite"!=e.shareTo&&"favorite"!=e.scene||r.favorite!==!1)&&r.ready&&r.ready(e,t),o(t,e)}})};i.shareToTimeline=function(e,i){alert("aaaaa"),a({menu:"menu:share:timeline",action:"shareTimeline"},{img_url:e.imgUrl,link:e.link,title:e.title},i)},i.shareToFriend=function(e,i){a({menu:"menu:share:appmessage",action:"sendAppMessage"},{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.desc,title:e.title,img_width:"640",img_height:"640"},i)},i.shareToWeibo=function(e,i){a({menu:"menu:share:weibo",action:"shareWeibo"},{content:e.desc,url:e.link},i)},i.generalShare=function(e,i){a({menu:"general:share"},{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.desc,title:e.title,img_width:"640",img_height:"640"},i)},i.disabledShare=function(e){e=e||function(){alert("��ǰҳ����ֹ����")},["menu:share:timeline","menu:share:appmessage","menu:share:qq","menu:share:weibo","general:share"].forEach(function(i){WeixinJSBridge.on(i,function(){return e(),!1})})},i.imagePreview=function(e,i){e&&i&&0!=i.length&&WeixinJSBridge.invoke("imagePreview",{current:e,urls:i})},i.showOptionMenu=function(){WeixinJSBridge.call("showOptionMenu")},i.hideOptionMenu=function(){WeixinJSBridge.call("hideOptionMenu")},i.showToolbar=function(){WeixinJSBridge.call("showToolbar")},i.hideToolbar=function(){WeixinJSBridge.call("hideToolbar")},i.getNetworkType=function(e){e&&"function"==typeof e&&WeixinJSBridge.invoke("getNetworkType",{},function(i){e(i.err_msg)})},i.closeWindow=function(e){e=e||{},WeixinJSBridge.invoke("closeWindow",{},function(i){switch(i.err_msg){case"close_window:ok":e.success&&e.success(i);break;default:e.fail&&e.fail(i)}})},i.ready=function(i){var n=function(){var e={};Object.keys(WeixinJSBridge).forEach(function(i){e[i]=WeixinJSBridge[i]}),Object.keys(WeixinJSBridge).forEach(function(i){"function"==typeof WeixinJSBridge[i]&&(WeixinJSBridge[i]=function(){try{var n=arguments.length>0?arguments[0]:{},a=n.__params?n.__params.__runOn3rd_apis||[]:[];["menu:share:timeline","menu:share:appmessage","menu:share:weibo","menu:share:qq","general:share"].forEach(function(e){-1===a.indexOf(e)&&a.push(e)})}catch(r){}return e[i].apply(WeixinJSBridge,arguments)})})};if(i&&"function"==typeof i){var a=this,r=function(){n(),i(a)};"undefined"==typeof e.WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",r,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",r),document.attachEvent("onWeixinJSBridgeReady",r)):r()}},i.openInWeixin=function(){return/MicroMessenger/i.test(navigator.userAgent)},i.sendEmail=function(e,i){i=i||{},WeixinJSBridge.invoke("sendEmail",{title:e.subject,content:e.body},function(e){"send_email:sent"===e.err_msg?i.success&&i.success(e):i.fail&&i.fail(e),i.all&&i.all(e)})},i.enableDebugMode=function(i){e.onerror=function(e,n,a,r){if("function"==typeof i)i({message:e,script:n,line:a,column:r});else{var t=[];t.push("������д�����"),t.push("\n������Ϣ��",e),t.push("\n�����ļ���",n),t.push("\n����λ�ã�",a+"�У�"+r+"��"),alert(t.join(""))}}},i.share=function(e,n){i.ready(function(i){i.shareToFriend(e,n),i.shareToTimeline(e,n),i.shareToWeibo(e,n),i.generalShare(e,n)})}}(window);