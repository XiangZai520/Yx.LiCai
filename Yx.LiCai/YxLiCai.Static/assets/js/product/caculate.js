define("caculate",["jquery"],function(n,a,t){function e(n,a,t){var e=0;if(t>300)e=.12*n*(t-300)/365,e+=.925*n*30/365;else{var c=Math.floor((t-1)/30),i=t-30*c,o=7+.5*c;e=r(n,o,i);for(var u=0;c>u;u++){var l=7+.5*u,s=30;e+=r(n,l,s)}}return e}function r(n,a,t){var e=a>12?12:a;return n*(e/100)/365*t}{var c=jQuery=n("jquery"),i=c("#account-month");c("#account-quarter"),c("#account-year")}c(".income-account .ui-btn").bind("click",function(){var n=c(this).attr("id"),a=c(this).parent("div").parent("div"),t=a.find(".account-money").eq(0).val(),i=0,o=parseFloat(a.find(".income-num").html().split("：")[1]),u=0;if("year"==n)u=.13*t;else{switch(n){case"month":i=a.find(".account-money").eq(1).val();break;case"quarter":i=30*a.find(".account-word-s span b").html()}if(!parseInt(t)||!parseInt(i)||parseInt(t)<=0||parseInt(i)<=0)return;u="month"==n?e(t,o,i):r(t,o,i)}var l=Math.floor(100*u)/100;l.toString().indexOf(".")<0&&(l+=".00"),a.find(".account-income").html("<h2>预期收益:</h2><b>"+l+"</b>")}),c(".invest-amount").on("input propertychange",function(){var n=c(this).val();n=n.replace(/[^\d.]/g,""),n=n.replace(/^\./g,""),n=n.replace(/\.{2,}/g,"."),n=n.replace(".","$#$").replace(/\./g,"").replace("$#$","."),n=n.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),c(this).val(n)}),c(".invest-amount").on("blur",function(){var n=100,a=c(this).val();a=a>=100?a:n,c(this).val(a)}),c(".month-duration").bind("blur",function(n){var a=c(this).val(),t=7;!parseInt(a)||0>=a||(parseInt(a)>300?t=12:t+=.5*Math.floor((a-1)/30),i.find(".income-num").html("收益率："+t+"%+<span>0%</span>"))})}),seajs.use("caculate");