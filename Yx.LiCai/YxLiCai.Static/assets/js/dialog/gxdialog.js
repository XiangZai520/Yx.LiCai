define(["jquery"],function(o,t,e){var n=o("jquery");!function(o){"function"==typeof define&&define.amd?define(["jquery"],o):o(window.jQuery||window.Zepto||window.$)}(function(o){if("function"==typeof Zepto||"object"==typeof Zepto){var t=function(o,t){return function(e){var n,i,a;return this?(a=this,i=a[o](),n={width:["left","right"],height:["top","bottom"]},n[o].forEach(function(o){i+=parseInt(a.css("padding-"+o),10),t&&(i+=parseInt(a.css("border-"+o+"-width"),10)),e&&(i+=parseInt(a.css("margin-"+o),10))}),i):null}};["width","height"].forEach(function(o){var e=o.substr(0,1).toUpperCase()+o.substr(1);Zepto.fn["inner"+e]=t(o,!1),Zepto.fn["outer"+e]=t(o,!0)})}var e=!!window.ActiveXObject&&!window.XMLHttpRequest,n={dom:{},isElement:function(o){return o&&("function"==typeof HTMLElement||"object"==typeof HTMLElement)&&o instanceof HTMLElement?!0:o&&o.nodeType&&1===o.nodeType?!0:!1},isJquery:function(o){return o&&o.length&&("function"==typeof jQuery||"object"==typeof jQuery)&&o instanceof jQuery?!0:!1},isZepto:function(o){return o&&o.length&&("function"==typeof Zepto||"object"==typeof Zepto)&&Zepto.zepto.isZ(o)?!0:!1}};n.init=function(t,e,n){var i=this;i.dom.docHtml=o("html"),i.dom.box=o("<div></div>",{id:"gxdialog","class":"gxdialog"}),i.dom.overlay=o("<div></div>",{id:"gxdialog_overlay","class":"gxdialog_overlay"}),i.dom.holder=o("<div></div>",{id:"gxdialog_holder","class":"gxdialog_holder"}),i.dom.title=o("<div></div>",{"class":"gxdialog_title"}),i.dom.info=o("<div></div>",{"class":"gxdialog_info"}),i.dom.btns=o("<div></div>",{"class":"gxdialog_btns"}),i.dom.closeBtn=o("<a></a>",{rel:"gxdialog",rev:"close"}),i.dom.box.on("click","a",function(){var o,t=this.rel,e=this.rev;if("gxdialog"===t){if("close"===e)i.exit();else for(var n=0,a=i.btnCache.length;a>n;n++)if(i.btnCache[n].name===e&&"function"==typeof i.btnCache[n].callback){o=i.btnCache[n].callback();break}return o!==!1&&i.exit(),!1}})},n.format=function(t,e,n){var i=this;if(i.exit(),"string"!=typeof t||t.length){if("string"==typeof t||i.isElement(t)||i.isJquery(t)||i.isZepto(t))t={info:t};else if("object"!=typeof t)return;"function"==typeof e&&(t.ok=e),"function"==typeof n&&(t.no=n),t=o.extend({},o.gxDialog.defaults,t),i.setContent(t),i.show(t)}},n.setContent=function(t){var e=this,n=(new Date).getTime();if("string"==typeof t.title&&t.title.length&&e.dom.title.html(t.title).appendTo(e.dom.box),e.infoCache=void 0,"string"==typeof t.info&&t.info.length)e.dom.info.html(t.info).appendTo(e.dom.box);else if(e.isElement(t.info)||e.isJquery(t.info)||e.isZepto(t.info)){e.infoCache=e.isElement(t.info)?o(t.info):t.info;var i=e.infoCache.css("float"),a=e.infoCache.css("display"),s=e.infoCache.css("visibility");e.dom.holder.css({"float":i,display:a,visibility:s,width:e.infoCache.outerWidth(),height:e.infoCache.outerHeight()}).data({"float":i,display:a,visibility:s}).insertAfter(e.infoCache),e.infoCache.show().appendTo(e.dom.box)}else t.info=String(t.info),e.dom.info.html(t.info).appendTo(e.dom.box);e.btnCache=[],"function"==typeof t.ok&&e.btnCache.push({name:"btn_ok",className:"btn_ok",text:t.okText,callback:t.ok}),"function"==typeof t.no&&e.btnCache.push({name:"btn_no",className:"btn_no",text:t.noText,callback:t.no});for(var l=0,d=t.buttons.length;d>l;l++)e.btnCache.push({name:"btn_"+n+"_"+l,className:"btn_"+l,text:t.buttons[l].text,callback:t.buttons[l].callback});if(e.btnCache.length){for(var c="",l=0,d=e.btnCache.length;d>l;l++)c+='<a class="'+e.btnCache[l].className+'" rel="gxdialog" rev="'+e.btnCache[l].name+'">'+e.btnCache[l].text+"</a>";e.dom.btns.html(c).appendTo(e.dom.box)}t.closeBtn&&e.dom.closeBtn.appendTo(e.dom.box)},n.show=function(o){var t=this;t.dom.box.appendTo("body"),o.lockScroll===!0&&t.dom.docHtml.addClass("gxdialog_lock"),o.background.length&&t.dom.overlay.css("background",o.background).appendTo("body").css("display","block"),t.dom.box.css("display","block"),"string"==typeof o.baseClass&&o.baseClass.length&&t.dom.box.addClass(o.baseClass);var n={};e&&(n.top=document.documentElement.scrollTop+window.screen.availHeight/4),o.width>0?(n.width=o.width,n.marginLeft=-(o.width/2)):n.marginLeft=-(t.dom.box.outerWidth()/2),o.height>0?(n.height=o.height,n.marginTop=-(o.height/2)):n.marginTop=-(t.dom.box.outerHeight()/2),o.zIndex>0&&(n.zIndex=o.zIndex),t.dom.box.css(n)},n.backDom=function(){var o=this;(o.isJquery(o.infoCache)||o.isZepto(o.infoCache))&&(o.infoCache.css({"float":"",display:"",visibility:""}).insertAfter(o.dom.holder),o.dom.holder.remove())},n.exit=function(){var o=this;o.backDom(),o.infoCache=void 0,o.btnCache=void 0,o.dom.box.attr("class","gxdialog").empty().hide(),o.dom.overlay.hide(),o.dom.docHtml.removeClass("gxdialog_lock")},n.init(),o.gxDialog=function(){n.format.apply(n,arguments)},o.gxDialog.close=function(){n.exit.apply(n)},o.gxDialog.defaults={title:"",info:"",ok:null,okText:"确 定",no:null,noText:"取 消",buttons:[],closeBtn:!0,lockScroll:!1,baseClass:"",background:"",width:0,height:0}}),"undefined"!=typeof e&&e.exports&&(e.exports=n)});