define("fetch_pwd_setting",["jquery","gxdialog"],function(t,e,n){function s(t){i.gxDialog({title:"",width:280,closeBtn:!1,info:'<div class="pop-box"><p class="warning-color">'+t+"</p></div>",ok:function(){}})}function a(){function t(e){window.setTimeout(function(){e--,e>0?(i(".cd-time").html(e),t(e)):(i.gxDialog.close(),window.location.href=""!=r?r:"/UserSetting/")},1e3)}i.gxDialog({title:"",width:280,closeBtn:!1,info:'<div class="pop-box"><h3>设置成功</h3><p>您的交易密码设置成功<p><div class="cd-time">3</div></div>'});var e=3;t(e)}var i=jQuery=t("jquery"),o=(t("gxdialog"),/^[0-9]{6}$/),d=/^.{6}$/,r=i("#returnUrl").val();i.gxDialog.defaults.background="#000",i("#fetchPassword").on("input propertychange",function(){i("#btnOK").unbind("click");var t=i("#fetchPassword").val();""!=t&&d.test(t)?(i("#btnOK").removeClass("ui-btn-gray"),i("#btnOK").click(function(){var t=i("#fetchPassword").val();return""==t?void s("请输入交易密码"):o.test(t)?void i.ajax({type:"POST",async:!1,url:"/UserSetting/SetUserSallpassword",data:{PassWord:t},success:function(t){return 0==t.Status?(event.preventDefault(),a(),!0):(s(t.Message),!1)},error:function(t,e,n){}}):void s("新交易密码格式错误，请修改为6位数字")})):i("#btnOK").addClass("ui-btn-gray")}),i(document).ready(function(){i("#btnOK").addClass("ui-btn-gray"),i("#fetchPassword").val("")}),i(".show-pwd").on("click",function(t){t.preventDefault();var e=i(this),n=e.hasClass("yes-pwd");n?(e.removeClass("yes-pwd"),e.parent("dd").children("input").attr("type","password")):(e.addClass("yes-pwd"),e.parent("dd").children("input").attr("type","tel"))})}),seajs.use("fetch_pwd_setting");