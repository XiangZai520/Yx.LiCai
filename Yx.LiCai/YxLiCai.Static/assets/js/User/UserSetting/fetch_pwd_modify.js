define("fetch_pwd_modify",["jquery","gxdialog"],function(t,s,e){function n(t){o.gxDialog({title:"",width:280,closeBtn:!1,info:'<div class="pop-box"><p class="warning-color">'+t+"</p></div>",ok:function(){}})}function a(){function t(s){window.setTimeout(function(){s--,s>0?(o(".cd-time").html(s),t(s)):(o.gxDialog.close(),window.location.href="/UserSetting/")},1e3)}o.gxDialog({title:"",width:280,closeBtn:!1,info:'<div class="pop-box"><h3>修改成功</h3><p>您的交易密码已修改成功<p><div class="cd-time">3</div></div>'});var s=3;t(s)}{var o=jQuery=t("jquery");t("gxdialog")}o.gxDialog.defaults.background="#000";var i=/^[0-9]{6}$/;o("#oldPassword").on("input propertychange",function(){o("#J_setting_ok").unbind("click");var t=o("#oldPassword").val(),s=o("#fetchPassword").val();""!=t&&i.test(t)&&""!=s&&i.test(s)?(o("#J_setting_ok").removeClass("ui-btn-gray"),o("#J_setting_ok").bind("click",function(){return""==t?(n("请输入原交易密码"),!1):i.test(t)?""==s?(n("请输入新交易密码"),!1):i.test(s)?void o.ajax({type:"POST",async:!1,url:"/UserSetting/UpdateUserSallpassword",data:{OldPassWord:t,NewPassWord:s},success:function(t){return 0==t.Status?(event.preventDefault(),a(),!0):(n(t.Message),!1)},error:function(t,s,e){}}):(n("新交易密码格式错误，请修改为6位数字"),!1):(n("原交易密码错误，请修改"),!1)})):(o("#J_setting_ok").addClass("ui-btn-gray"),o("#J_setting_ok").unbind("click"))}),o("#fetchPassword").on("input propertychange",function(){o("#J_setting_ok").unbind("click");var t=o("#oldPassword").val(),s=o("#fetchPassword").val();""!=t&&i.test(t)&&""!=s&&i.test(s)?(o("#J_setting_ok").removeClass("ui-btn-gray"),o("#J_setting_ok").bind("click",function(){return""==t?(n("请输入原交易密码"),!1):i.test(t)?""==s?(n("请输入新交易密码"),!1):i.test(s)?void o.ajax({type:"POST",async:!1,url:"/UserSetting/UpdateUserSallpassword",data:{OldPassWord:t,NewPassWord:s},success:function(t){return 0==t.Status?(event.preventDefault(),a(),!0):(n(t.Message),!1)},error:function(t,s,e){}}):(n("新交易密码格式错误，请修改为6位数字"),!1):(n("原交易密码错误，请修改"),!1)})):o("#J_setting_ok").addClass("ui-btn-gray")}),o(document).ready(function(){o("#J_setting_ok").addClass("ui-btn-gray"),o("#oldPassword").val(""),o("#fetchPassword").val("")}),o(".show-pwd").on("click",function(t){t.preventDefault();var s=o(this),e=s.hasClass("yes-pwd");e?(s.removeClass("yes-pwd"),s.parent("dd").children("input").attr("type","password")):(s.addClass("yes-pwd"),s.parent("dd").children("input").attr("type","tel"))})}),seajs.use("fetch_pwd_modify");