define("user_setting_pwd",["jquery","gxdialog"],function(t,s,e){function n(t){d.gxDialog({title:"",width:280,closeBtn:!1,info:'<div class="pop-box"><p class="warning-color">'+t+"</p></div>",ok:function(){}})}function a(){function t(s){window.setTimeout(function(){s--,s>0?(d(".cd-time").html(s),t(s)):(d.gxDialog.close(),window.location.href="/UserSetting/")},1e3)}d.gxDialog({title:"",width:280,closeBtn:!1,info:'<div class="pop-box"><h3>修改成功</h3><p>您的密码已修改成功<p><div class="cd-time">3</div></div>'});var s=3;t(s)}var d=jQuery=t("jquery"),i=(t("gxdialog"),/^[0-9a-zA-Z_/]{6,16}$/),r=/^.{6,16}$/;d.gxDialog.defaults.background="#000",d(".show-pwd").on("click",function(t){t.preventDefault();var s=d(this),e=s.hasClass("yes-pwd");e?(s.removeClass("yes-pwd"),s.parent("dd").children("input").attr("type","password")):(s.addClass("yes-pwd"),s.parent("dd").children("input").attr("type","text"))}),d("#oldPassword").on("input propertychange",function(){d("#J_setting_pwd").unbind("click");var t=d("#oldPassword").val(),s=d("#regPassword").val();""!=t&&r.test(t)&&""!=s&&r.test(s)?(d("#J_setting_pwd").removeClass("ui-btn-gray"),d("#J_setting_pwd").bind("click",function(){return t=d("#oldPassword").val(),s=d("#regPassword").val(),""==t?(n("请输入原始密码"),!1):i.test(t)?""==s?(n("请输入新密码"),!1):i.test(s)?void d.ajax({type:"POST",async:!1,url:"/UserSetting/UpdateUserOldPassWord",data:{OldPassWord:t,NewPassWord:s},success:function(t){return 0==t.Status?(event.preventDefault(),a(),!0):(n(t.Message),!1)},error:function(t,s,e){}}):(n("密码格式错误，请修改为6-16位字母、数字、下划线组合"),!1):(n("原始密码错误，请修改"),!1)})):(d("#J_setting_pwd").addClass("ui-btn-gray"),d("#J_setting_pwd").unbind("click"))}),d("#regPassword").on("input propertychange",function(){d("#J_setting_pwd").unbind("click");var t=d("#oldPassword").val(),s=d("#regPassword").val();""!=t&&r.test(t)&&""!=s&&r.test(s)?(d("#J_setting_pwd").removeClass("ui-btn-gray"),d("#J_setting_pwd").bind("click",function(){return t=d("#oldPassword").val(),s=d("#regPassword").val(),""==t?(n("请输入原始密码"),!1):i.test(t)?""==s?(n("请输入新密码"),!1):i.test(s)?void d.ajax({type:"POST",async:!1,url:"/UserSetting/UpdateUserOldPassWord",data:{OldPassWord:t,NewPassWord:s},success:function(t){return 0==t.Status?(event.preventDefault(),a(),!0):(n(t.Message),!1)},error:function(t,s,e){}}):(n("密码格式错误，请修改为6-16位字母、数字、下划线组合"),!1):(n("原始密码错误，请修改"),!1)})):d("#J_setting_pwd").addClass("ui-btn-gray")}),d(document).ready(function(){d("#J_setting_pwd").addClass("ui-btn-gray"),d("#oldPassword").val(""),d("#regPassword").val("")})}),seajs.use("user_setting_pwd");