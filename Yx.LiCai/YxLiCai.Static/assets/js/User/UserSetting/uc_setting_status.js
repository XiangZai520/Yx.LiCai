define("uc_setting_status",["jquery","gxdialog","spin"],function(e,r,t){function a(e){s.gxDialog({title:"",width:280,closeBtn:!1,info:'<div class="pop-box"><p class="warning-color">'+e+"</p></div>",ok:function(){}})}function n(){function e(r){window.setTimeout(function(){r--,r>0?(s(".cd-time").html(r),e(r)):(s.gxDialog.close(),window.location.href=""!=o?o:"/UserSetting/")},1e3)}s.gxDialog({title:"",width:280,closeBtn:!1,info:'<div class="pop-box"><h3>认证成功</h3><p>实名认证成功，即刻开始一休理财<p><div class="cd-time">3</div></div>'});var r=3;e(r)}function i(e){if(e=e.toUpperCase(),!/(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(e))return!1;var r,t;if(r=e.length,15==r){if(year="19"+e.substr(6,2),year>2015||year<1900)return!1}else if(18==r&&(year=e.substr(6,4),year>2015||year<1900))return!1;if(15==r){t=new RegExp(/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/);var a,n=e.match(t),i=new Date("19"+n[2]+"/"+n[3]+"/"+n[4]);if(a=i.getYear()==Number(n[2])&&i.getMonth()+1==Number(n[3])&&i.getDate()==Number(n[4])){var s,u=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),o=new Array("1","0","X","9","8","7","6","5","4","3","2"),d=0;for(e=e.substr(0,6)+"19"+e.substr(6,e.length-6),s=0;17>s;s++)d+=e.substr(s,1)*u[s];return e+=o[d%11],!0}return!1}if(18==r){t=new RegExp(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/);var a,n=e.match(t),i=new Date(n[2]+"/"+n[3]+"/"+n[4]);if(a=i.getFullYear()==Number(n[2])&&i.getMonth()+1==Number(n[3])&&i.getDate()==Number(n[4])){var l,s,u=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),o=new Array("1","0","X","9","8","7","6","5","4","3","2"),d=0;for(s=0;17>s;s++)d+=e.substr(s,1)*u[s];return l=o[d%11],l!=e.substr(17,1)?!1:!0}return!1}return!1}var s=jQuery=e("jquery"),u=(e("gxdialog"),e("spin")),o=s("#returnUrl").val();s.gxDialog.defaults.background="#000";s("#ok-bank").click(function(){var e=s("#IDCard").val().replace(/[ ]/g,"");if(""==s("#Name").val().replace(/[ ]/g,""))return void a("请输入姓名");if(s("#Name").val().length>15)return void a("姓名填写错误，请修改为15字内");if(""==e)return void a("请输入身份证号码");var r=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;if(!r.test(e))return void a("身份证号码输入错误，请重新输入");if(len=e.length,15==len){if(year="19"+e.substr(6,2),year>2015||year<1900)return void a("身份证号码输入错误，请重新输入")}else if(18==len&&(year=e.substr(6,4),year>2015||year<1900))return void a("身份证号码输入错误，请重新输入");if(!i(e))return void a("身份证号码输入错误，请重新输入");var t={},o=document.getElementById("preview"),d=new u(t).spin(o);s.ajax({type:"POST",async:!1,url:"/UserSetting/UpdateIsRealCard",data:{IDcard:e,Username:s("#Name").val().replace(/[ ]/g,"")},success:function(e){d.stop(),1==e.Status?n():a(e.Message)},error:function(e,r,t){d.stop(),a("姓名与身份证号码不符，请重新输入")}})})}),seajs.use("uc_setting_status");