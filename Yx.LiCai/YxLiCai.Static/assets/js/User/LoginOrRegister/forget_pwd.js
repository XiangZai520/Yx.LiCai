define("forget_pwd",["jquery","gxdialog"],function(e,n,o){function t(e){d.gxDialog({title:"",width:280,closeBtn:!1,info:'<div class="pop-box"><p class="warning-color">'+e+"</p></div>",ok:function(){}})}function a(){d("#repOld").show(),d("#repNew").hide(),s=u,r=window.setInterval(i,1e3),d.ajax({type:"POST",async:!1,url:"/Login/SendValidateCode",data:{account:dianhua},success:function(e){return e?void 0:void t("发送验证码失败")},error:function(e,n,o){}});var e=dian.length,n=dian.substr(parseInt(e-4)),o="我们已将验证码发送至您****"+n+"的手机，请耐心等待。";d(".yx-tips").css("display",""),d(".yx-tips").html(o)}function i(){1==s?(window.clearInterval(r),d("#repOld").hide(),d("#repNew").show(),d("#TimeMove").html("60")):(s--,d("#TimeMove").html(s))}{var d=jQuery=e("jquery");e("gxdialog")}d.gxDialog.defaults.background="#000";var r,s,c=/^[0-9]{6}$/,u=60;""!=dianhua&&a(),d("#repNewMsg").click(function(){a()}),d("#phoneCode").on("input propertychange",function(){d("#btnNext").unbind("click");var e=d("#phoneCode").val();""!=e&&c.test(e)?(d("#btnNext").removeClass("ui-btn-gray"),d("#btnNext").bind("click",function(){return""==d("#phoneCode").val()?(t("请输入验证码"),!1):c.test(e)?void d.ajax({type:"POST",async:!1,url:"/Login/CheckUserCode",data:{Code:d("#phoneCode").val().replace(/[ ]/g,""),Phone:dianhua},success:function(e){return 1==e.Status?(window.location.href="/Login/setting_pwd?phone="+e.Message+"&Code="+d("#phoneCode").val().replace(/[ ]/g,""),!0):(t(e.Message),!1)},error:function(e,n,o){}}):(t("验证码错误，请修改"),!1)})):d("#btnNext").addClass("ui-btn-gray")}),d(document).ready(function(){d("#btnNext").addClass("ui-btn-gray"),d("#phoneCode").val("")})}),seajs.use("forget_pwd");